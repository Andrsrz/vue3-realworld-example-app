import{r as s,I as a,A as e,B as r,d as o,n as l,k as t,a as n,s as i,b as u,e as c,f as d,y as m,F as f,m as p,x as g,q as v,v as b,o as w,h as x,g as y}from"./index.135e41aa.js";var h=o({name:"LoginPage",setup(){const{updateUser:o}=i.user,u=l(null),c=t({email:"",password:""}),d=l({});return{formRef:u,form:c,login:async()=>{if(!u.value?.checkValidity())return;const l=await async function(o){const l=await s.checkablePost("/users/login",{user:o}),t=a(l);return t.isOk()?e(t.value.user):r(t.value)}(c);l.isOk()?(o(l.value),await n("global-feed")):d.value=await l.value.getErrors()},errors:d}}});const k={class:"auth-page"},q={class:"container page"},P={class:"row"},S={class:"col-md-6 offset-md-3 col-xs-12"},U=d("h1",{class:"text-xs-center"}," Sign in ",-1),V={class:"text-xs-center"},A=y(" Need an account? "),E={class:"error-messages"},L={class:"form-group","aria-required":"true"},O={class:" form-group"};h.render=function(s,a,e,r,o,l){const t=u("AppLink");return w(),c("div",k,[d("div",q,[d("div",P,[d("div",S,[U,d("p",V,[d(t,{name:"register"},{default:m((()=>[A])),_:1})]),d("ul",E,[(w(!0),c(f,null,p(s.errors,((s,a)=>(w(),c("li",{key:a},x(a)+" "+x(s[0]),1)))),128))]),d("form",{ref:"formRef",onSubmit:a[3]||(a[3]=g(((...a)=>s.login(...a)),["prevent"]))},[d("fieldset",L,[v(d("input",{"onUpdate:modelValue":a[1]||(a[1]=a=>s.form.email=a),class:"form-control form-control-lg",type:"email",required:"",placeholder:"Email"},null,512),[[b,s.form.email]])]),d("fieldset",O,[v(d("input",{"onUpdate:modelValue":a[2]||(a[2]=a=>s.form.password=a),class:"form-control form-control-lg",type:"password",required:"",placeholder:"Password"},null,512),[[b,s.form.password]])]),d("button",{class:"btn btn-lg btn-primary pull-xs-right",disabled:!s.form.email||!s.form.password,type:"submit"}," Sign in ",8,["disabled"])],544)])])])])};export default h;
