let e=document.createElement("style");e.innerHTML=".space[data-v-7a2b6835]{margin-right:4px}",document.head.appendChild(e);import{l as a,n as l,e as o,D as s,d as n,E as i,G as t,H as r,f as c,I as u,h as f,q as g,r as d,c as p,a as v,t as m,i as w,b as P,F as y,v as b,j as h,o as k,p as A,k as F}from"./index.70321897.js";function N(e){const s=a({});async function n(){i(await async function(e){return o.get("/profiles/"+e).then(e=>e.profile)}(e))}async function i(e){Object.assign(s,e)}return l(()=>{n()}),{profile:s,updateProfile:i}}function x({username:e,following:a}){const{active:l,run:n}=s((async function(){let l=null;return l=!0===a.value?await async function(e){return o.delete(`/profiles/${e}/follow`).then(e=>e.profile)}(e):await async function(e){return o.post(`/profiles/${e}/follow`).then(e=>e.profile)}(e),l}));return{followProcessGoing:l,toggleFollow:n}}var C=n({name:"Profile",components:{ArticlePreview:i,ArticlesNavigation:t,Pagination:r},setup(){const e=f(),a=g(),l=c(()=>a.name),o=c(()=>a.params.username),s=c(()=>e.state.user),{profile:n,updateProfile:i}=N(o.value),{followProcessGoing:t,toggleFollow:r}=x({following:c(()=>n.following),username:o.value}),d=c(()=>null!==e.state.user),p=c(()=>d.value&&s.value.username===o.value),v=c(()=>d.value&&s.value.username!==o.value),{articlesDownloading:m,articlesCount:w,articles:P,page:y,changePage:b,updateArticle:h}=u({routeName:l,username:o});return{username:o,profile:n,articlesDownloading:m,articles:P,articlesCount:w,page:y,changePage:b,updateArticle:h,isMyProfile:p,isNotMyProfile:v,routeName:l,followProcessGoing:t,toggleFollow:async function(){const e=await r();i(e)}}}});const G=h("data-v-7a2b6835");A("data-v-7a2b6835");const M={class:"profile-page"},_={class:"user-info"},D={class:"container"},j={class:"row"},E={class:"col-xs-12 col-md-10 offset-md-1"},U={key:0},H=v("i",{class:"ion-gear-a space"},null,-1),I=P(" Edit profile settings "),L=v("i",{class:"ion-plus-round space"},null,-1),$={class:"container"},q={class:"row"},O={class:"col-xs-12 col-md-10 offset-md-1"},T={class:"articles-toggle"},z={key:0,class:"article-preview"};F();const B=G((function(e,a,l,o,s,n){const i=d("AppLink"),t=d("ArticlesNavigation"),r=d("ArticlePreview"),c=d("Pagination");return k(),p("div",M,[v("div",_,[v("div",D,[v("div",j,[v("div",E,[v("img",{src:e.profile.image,class:"user-img"},null,8,["src"]),v("h4",null,m(e.profile.username),1),e.profile.bio?(k(),p("p",U,m(e.profile.bio),1)):w("v-if",!0),e.isMyProfile?(k(),p(i,{key:1,class:"btn btn-sm btn-outline-secondary action-btn",name:"settings"},{default:G(()=>[H,I]),_:1})):w("v-if",!0),e.isNotMyProfile?(k(),p("button",{key:2,class:"btn btn-sm btn-outline-secondary action-btn",disabled:e.followProcessGoing,onClick:a[1]||(a[1]=(...a)=>e.toggleFollow(...a))},[L,P(" "+m(e.profile.following?"Unfollow":"Follow")+" "+m(e.profile.username),1)],8,["disabled"])):w("v-if",!0)])])])]),v("div",$,[v("div",q,[v("div",O,[v("div",T,[v(t,{"use-author":e.username,"use-favorited":e.username},null,8,["use-author","use-favorited"])]),e.articlesDownloading?(k(),p("div",z," Articles are downloading... ")):(k(),p(y,{key:1},[(k(!0),p(y,null,b(e.articles,(a,l)=>(k(),p(r,{key:a.slug,article:a,onUpdate:a=>e.updateArticle(l,a)},null,8,["article","onUpdate"]))),128)),v(c,{count:e.articlesCount,page:e.page,"onPage-change":e.changePage},null,8,["count","page","onPage-change"])],64))])])])])}));C.render=B,C.__scopeId="data-v-7a2b6835",C.__file="src/pages/Profile.vue";export default C;
