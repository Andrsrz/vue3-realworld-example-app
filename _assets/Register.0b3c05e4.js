import{r as e,d as s,n as r,k as a,a as o,s as t,b as l,e as n,f as u,y as m,F as c,m as i,x as d,q as f,v as p,o as g,h as y,g as b}from"./index.c7c791ca.js";var h=s({name:"Register",setup(){const{updateUser:s}=t.user,l=r(null),n=a({username:"",email:"",password:""}),u=r({});return{formRef:l,form:n,register:async()=>{if(!l.value?.checkValidity())return;const r=await async function(s){try{return{status:"ok",data:(await e.post("/users",{user:s})).user}}catch(e){return{status:"error",data:e.errors}}}(n);"ok"===r.status?(s(r.data),o("global-feed")):u.value=r.data},errors:u}}});const v={class:"auth-page"},x={class:"container page"},w={class:"row"},k={class:"col-md-6 offset-md-3 col-xs-12"},q=u("h1",{class:"text-xs-center"}," Sign up ",-1),U={class:"text-xs-center"},V=b(" Have an account? "),R={class:"error-messages"},S={class:"form-group"},L={class:"form-group"},j={class:"form-group"};h.render=function(e,s,r,a,o,t){const b=l("AppLink");return g(),n("div",v,[u("div",x,[u("div",w,[u("div",k,[q,u("p",U,[u(b,{name:"login"},{default:m((()=>[V])),_:1})]),u("ul",R,[(g(!0),n(c,null,i(e.errors,((e,s)=>(g(),n("li",{key:s},y(s)+" "+y(e[0]),1)))),128))]),u("form",{ref:"formRef",onSubmit:s[4]||(s[4]=d(((...s)=>e.register(...s)),["prevent"]))},[u("fieldset",S,[f(u("input",{"onUpdate:modelValue":s[1]||(s[1]=s=>e.form.username=s),class:"form-control form-control-lg",type:"text",required:"",placeholder:"Your Name"},null,512),[[p,e.form.username]])]),u("fieldset",L,[f(u("input",{"onUpdate:modelValue":s[2]||(s[2]=s=>e.form.email=s),class:"form-control form-control-lg",type:"email",required:"",placeholder:"Email"},null,512),[[p,e.form.email]])]),u("fieldset",j,[f(u("input",{"onUpdate:modelValue":s[3]||(s[3]=s=>e.form.password=s),class:"form-control form-control-lg",type:"password",minLength:8,required:"",placeholder:"Password"},null,512),[[p,e.form.password]])]),u("button",{type:"submit",class:"btn btn-lg btn-primary pull-xs-right",disabled:!(e.form.email&&e.form.username&&e.form.password)}," Sign up ",8,["disabled"])],544)])])])])};export default h;
