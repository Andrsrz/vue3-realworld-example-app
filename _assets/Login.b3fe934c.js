import{r as s,I as e,B as a,C as r,d as o,n as l,k as t,a as n,s as i,b as u,e as c,f as d,y as m,F as f,m as p,x as g,q as v,v as b,o as w,h as x,g as y}from"./index.52c6ec0d.js";var h=o({name:"Login",setup(){const{updateUser:o}=i.user,u=l(null),c=t({email:"",password:""}),d=l({});return{formRef:u,form:c,login:async()=>{if(!u.value?.checkValidity())return;const l=await async function(o){const l=await s.checkablePost("/users/login",{user:o}),t=e(l);return t.isOk()?a(t.value.user):r(t.value)}(c);l.isOk()?(o(l.value),n("global-feed")):d.value=await l.value.getErrors()},errors:d}}});const k={class:"auth-page"},q={class:"container page"},S={class:"row"},U={class:"col-md-6 offset-md-3 col-xs-12"},V=d("h1",{class:"text-xs-center"}," Sign in ",-1),E={class:"text-xs-center"},L=y(" Need an account? "),O={class:"error-messages"},P={class:"form-group","aria-required":"true"},R={class:" form-group"};h.render=function(s,e,a,r,o,l){const t=u("AppLink");return w(),c("div",k,[d("div",q,[d("div",S,[d("div",U,[V,d("p",E,[d(t,{name:"register"},{default:m((()=>[L])),_:1})]),d("ul",O,[(w(!0),c(f,null,p(s.errors,((s,e)=>(w(),c("li",{key:e},x(e)+" "+x(s[0]),1)))),128))]),d("form",{ref:"formRef",onSubmit:e[3]||(e[3]=g(((...e)=>s.login(...e)),["prevent"]))},[d("fieldset",P,[v(d("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>s.form.email=e),class:"form-control form-control-lg",type:"email",required:"",placeholder:"Email"},null,512),[[b,s.form.email]])]),d("fieldset",R,[v(d("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>s.form.password=e),class:"form-control form-control-lg",type:"password",required:"",placeholder:"Password"},null,512),[[b,s.form.password]])]),d("button",{class:"btn btn-lg btn-primary pull-xs-right",disabled:!s.form.email||!s.form.password,type:"submit"}," Sign in ",8,["disabled"])],544)])])])])};export default h;
