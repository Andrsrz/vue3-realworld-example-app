let e=document.createElement("style");e.innerHTML=".space[data-v-7a2b6835]{margin-right:4px}",document.head.appendChild(e);import{m as a,n as s,e as t,E as l,l as o,G as n,d as i,H as r,I as c,J as u,f,q as p,h as d,r as g,c as v,a as m,t as w,i as y,b,F as P,x as h,j as C,o as k,p as A,k as x}from"./index.6d53bf0c.js";const F=e=>{const o=a([]),n=a(0),i=a(1);return s(async()=>{const a=await async function(e,a=1){const s={limit:l,offset:(a-1)*l,favorited:e};return t.get("/articles",{params:s})}(e,i.value);o.value=a.articles,n.value=a.articlesCount}),{articles:o,articlesCount:n,page:i}};const G=e=>{const o=a([]),n=a(0),i=a(1);return s(async()=>{const a=await async function(e,a=1){const s={limit:l,offset:(a-1)*l,author:e};return t.get("/articles",{params:s})}(e,i.value);o.value=a.articles,n.value=a.articlesCount}),{articles:o,articlesCount:n,page:i}};function M(e){const a=o({});async function l(){n(await async function(e){return t.get("/profiles/"+e).then(e=>e.profile)}(e))}async function n(e){Object.assign(a,e)}return s(()=>{l()}),{profile:a,updateProfile:n}}function N({username:e,following:a}){const{active:s,run:l}=n((async function(){let s=null;return s=!0===a.value?await async function(e){return t.delete(`/profiles/${e}/follow`).then(e=>e.profile)}(e):await async function(e){return t.post(`/profiles/${e}/follow`).then(e=>e.profile)}(e),s}));return{followProcessGoing:s,toggleFollow:l}}var U=i({name:"Profile",components:{ArticlePreview:r,ArticlesNavigation:c,Pagination:u},setup(){const e=d(),a=p(),s=f(()=>a.params.username),t=f(()=>e.state.user),{profile:l,updateProfile:o}=M(s.value),{followProcessGoing:n,toggleFollow:i}=N({following:f(()=>l.following),username:s.value}),r=f(()=>null!==e.state.user),c=f(()=>r.value&&t.value.username===s.value),u=f(()=>r.value&&t.value.username!==s.value),g="profile"===a.name?G:F,{articles:v,articlesCount:m,page:w}=g(s.value);return{username:s,profile:l,articles:v,articlesCount:m,page:w,onArticleUpdate:(e,a)=>{v.value[e]=a},isMyProfile:c,isNotMyProfile:u,routeName:f(()=>a.name),followProcessGoing:n,toggleFollow:async function(){const e=await i();o(e)}}}});const _=C("data-v-7a2b6835");A("data-v-7a2b6835");const j={class:"profile-page"},E={class:"user-info"},H={class:"container"},I={class:"row"},L={class:"col-xs-12 col-md-10 offset-md-1"},$={key:0},q=m("i",{class:"ion-gear-a space"},null,-1),J=b(" Edit profile settings "),O=m("i",{class:"ion-plus-round space"},null,-1),T={class:"container"},z={class:"row"},B={class:"col-xs-12 col-md-10 offset-md-1"},D={class:"articles-toggle"};x();const K=_((function(e,a,s,t,l,o){const n=g("AppLink"),i=g("ArticlesNavigation"),r=g("ArticlePreview"),c=g("Pagination");return k(),v("div",j,[m("div",E,[m("div",H,[m("div",I,[m("div",L,[m("img",{src:e.profile.image,class:"user-img"},null,8,["src"]),m("h4",null,w(e.profile.username),1),e.profile.bio?(k(),v("p",$,w(e.profile.bio),1)):y("v-if",!0),e.isMyProfile?(k(),v(n,{key:1,class:"btn btn-sm btn-outline-secondary action-btn",name:"settings"},{default:_(()=>[q,J]),_:1})):y("v-if",!0),e.isNotMyProfile?(k(),v("button",{key:2,class:"btn btn-sm btn-outline-secondary action-btn",disabled:e.followProcessGoing,onClick:a[1]||(a[1]=(...a)=>e.toggleFollow(...a))},[O,b(" "+w(e.profile.following?"Unfollow":"Follow")+" "+w(e.profile.username),1)],8,["disabled"])):y("v-if",!0)])])])]),m("div",T,[m("div",z,[m("div",B,[m("div",D,[m(i,{"use-author":e.username,"use-favorited":e.username},null,8,["use-author","use-favorited"])]),(k(!0),v(P,null,h(e.articles,(a,s)=>(k(),v(r,{key:a.slug,article:a,onUpdate:a=>e.onArticleUpdate(s,a)},null,8,["article","onUpdate"]))),128)),m(c,{count:e.articlesCount,page:e.page},null,8,["count","page"])])])])])}));U.render=K,U.__scopeId="data-v-7a2b6835",U.__file="src/pages/Profile.vue";export default U;
